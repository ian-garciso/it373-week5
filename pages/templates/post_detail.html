{% extends 'base.html' %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>{{ post.title }}</h1>
    <p class="text-muted">Posted on {{ post.created_at|date:"F j, Y, g:i a" }}</p>
    <p>{{ post.body }}</p>
    <hr>

    <h3>Comments</h3>
    {% if comments %}
        <ul class="list-group mb-4">
            {% for comment in comments %}
                <li class="list-group-item">
                    <strong>{{ comment.author }}</strong> 
                    <span class="text-muted">said on {{ comment.created_at|date:"F j, Y, g:i a" }}</span>
                    <p class="mb-0">{{ comment.text }}</p>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No comments yet. Be the first to comment!</p>
    {% endif %}

    <h3>Add a Comment</h3>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <form method="post" class="mt-3">
        {% csrf_token %}
        <div class="mb-3">
            <label for="id_author" class="form-label">Name</label>
            {{ form.author }}
            {% if form.author.errors %}
                <div class="text-danger small">{{ form.author.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="id_text" class="form-label">Comment</label>
            {{ form.text }}
            {% if form.text.errors %}
                <div class="text-danger small">{{ form.text.errors }}</div>
            {% endif %}
        </div>

        <button type="submit" class="btn btn-primary">Post Comment</button>
    </form>
</div>
{% endblock %}
